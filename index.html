<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mini Escape Game</title>

<style>
:root{
  --bg:#0b0b10;
  --text:#f4f4f7;
  --muted:#b9b9c8;
  --accent:#7c5cff;
  --danger:#ff4d6d;
  --ok:#2ee59d;
}

body{
  margin:0;
  font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:radial-gradient(1200px 800px at 20% 0%, #1c1650 0%, var(--bg) 55%);
  color:var(--text);
  display:flex;
  align-items:center;
  justify-content:center;
  min-height:100vh;
  padding:16px;
}

.wrap{ width:min(520px,100%); }

.card{
  background:rgba(20,20,35,.92);
  border:1px solid rgba(255,255,255,.08);
  border-radius:18px;
  padding:18px;
  box-shadow:0 18px 50px rgba(0,0,0,.45);
}

.screen{ display:none; }
.screen.active{ display:block; }

h1{ margin:0 0 10px; font-size:20px; }
p{ margin:0 0 12px; color:var(--muted); line-height:1.35; }

.hintBox{
  background:rgba(124,92,255,.10);
  border:1px dashed rgba(124,92,255,.5);
  padding:12px;
  border-radius:14px;
  font-size:14px;
}

.hintCounter{
  font-size:12px;
  color:var(--muted);
  margin-bottom:6px;
}

.hintBtn{
  margin-top:10px;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.2);
  background:rgba(0,0,0,.2);
  color:white;
  cursor:pointer;
}

.hintBtn.disabled{
  opacity:.4;
  cursor:not-allowed;
}

.msg{
  margin-top:10px;
  font-size:14px;
  min-height:20px;
}
.msg.ok{ color:var(--ok); }
.msg.no{ color:var(--danger); }

.pinDisplay{
  padding:14px;
  border-radius:14px;
  background:rgba(0,0,0,.25);
  text-align:center;
  font-size:20px;
  letter-spacing:6px;
  margin:12px 0 10px;
  user-select:none;
}

.keypad{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
}

.key{
  padding:14px;
  border-radius:14px;
  background:rgba(0,0,0,.30);
  color:white;
  cursor:pointer;
  border:1px solid rgba(255,255,255,.12);
  font-weight:800;
  font-size:16px;
}
.key:active{ transform:translateY(1px); }

.key.alt{
  font-size:14px;
  font-weight:800;
}

.primaryBtn{
  margin-top:12px;
  padding:12px;
  width:100%;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
  background:linear-gradient(180deg, rgba(124,92,255,.95), rgba(124,92,255,.70));
  color:white;
  font-weight:800;
  cursor:pointer;
}

input{
  width:100%;
  padding:12px;
  border-radius:14px;
  background:rgba(0,0,0,.25);
  border:1px solid rgba(255,255,255,.12);
  color:white;
  margin-top:10px;
  outline:none;
}

.cover img{
  width:100%;
  border-radius:14px;
  display:block;
  margin-top:10px;
}

.trackLink{
  display:block;
  text-align:center;
  padding:14px;
  margin-top:16px;
  border-radius:14px;
  color:white;
  text-decoration:none;
  font-weight:900;
  border:1px solid rgba(255,255,255,.12);
}

.revealBtn{
  background:linear-gradient(180deg, #ff4d6d, #c9184a);
  font-size:18px;
  animation:pulse 1.6s infinite;
}

@keyframes pulse{
  0%{ transform:scale(1); }
  50%{ transform:scale(1.05); }
  100%{ transform:scale(1); }
}
</style>
</head>

<body>
<div class="wrap">
<div class="card">

<!-- SCREEN 1 -->
<section id="s1" class="screen active">
<h1>Ã‰nigme 1</h1>
<p>Entre le bon code pour dÃ©verrouiller la suite.</p>

<div class="hintBox">
  <div class="hintCounter" id="counter1">Indice 1 / 2</div>
  <div id="h1_1">ğŸ’¡ Tradition provenÃ§ale de NoÃ«l : les desserts chrÃ©tiens sont au nombre de ?</div>
  <div id="h1_2" style="display:none;">ğŸ’¡ NumÃ©ro associÃ© Ã  la malchance.</div>
</div>

<button class="hintBtn" id="more1">Afficher un indice</button>

<div class="pinDisplay" id="pinDisplay">_ _ _ _</div>

<div class="keypad" id="keypad">
<button class="key" data-k="1">1</button>
<button class="key" data-k="2">2</button>
<button class="key" data-k="3">3</button>
<button class="key" data-k="4">4</button>
<button class="key" data-k="5">5</button>
<button class="key" data-k="6">6</button>
<button class="key" data-k="7">7</button>
<button class="key" data-k="8">8</button>
<button class="key" data-k="9">9</button>
<button class="key alt" id="backKey">âŒ«</button>
<button class="key" data-k="0">0</button>
<button class="key alt" id="clearKey">Effacer</button>
</div>

<button class="primaryBtn" id="b1">Valider</button>
<div id="m1" class="msg"></div>
</section>

<!-- SCREEN 2 (TRÃ”NE) -->
<section id="s2" class="screen">
<h1>Ã‰nigme 2</h1>
<p>Entre le bon mot pour accÃ©der Ã  la suite.</p>

<div class="hintBox">
  <div class="hintCounter" id="counter2">Indice 1 / 3</div>
  <div id="h2_1">ğŸ’¡ Mot liÃ© Ã  la royautÃ©.</div>
  <div id="h2_2" style="display:none;">ğŸ’¡ AssociÃ© Ã  une couronne et au pouvoir.</div>
  <div id="h2_3" style="display:none;">ğŸ’¡ Cela peut aussi Ãªtre le toilette.</div>
</div>

<button class="hintBtn" id="more2">Afficher un indice</button>

<input id="a2" placeholder="Votre rÃ©ponse">
<button class="primaryBtn" id="b2">Valider</button>
<div id="m2" class="msg"></div>
</section>

<!-- SCREEN 3 (BOOBA) -->
<section id="s3" class="screen">
<h1>Ã‰nigme 3</h1>
<p>Entre le bon mot pour accÃ©der Ã  la rÃ©vÃ©lation.</p>

<div class="hintBox">
  <div class="hintCounter" id="counter3">Indice 1 / 3</div>
  <div id="h3_1">ğŸ’¡ NumÃ©ro 10.</div>
  <div id="h3_2" style="display:none;">ğŸ’¡ Rap.</div>
  <div id="h3_3" style="display:none;">ğŸ’¡ Duc de Boulogne.</div>
</div>

<button class="hintBtn" id="more3">Afficher un indice</button>

<input id="a3" placeholder="Votre rÃ©ponse">
<button class="primaryBtn" id="b3">Valider</button>
<div id="m3" class="msg"></div>
</section>

<!-- SCREEN 4 -->
<section id="s4" class="screen">
<h1>ğŸ‰ RÃ©vÃ©lation finale</h1>
<p style="font-weight:800;text-align:center;">
Pour dÃ©couvrir la surpriseâ€¦<br>ğŸ‘‡ Cliquez ci-dessous ğŸ‘‡
</p>

<div class="cover">
<img src="https://www.radiofrance.fr/s3/cruiser-production/2017/12/ad19e11c-8c0a-11e8-a11d-42010ae60007/860_sitesdefaultfiles20171203318378boobatrone.jpg"
loading="lazy">
</div>

<a class="trackLink revealBtn"
href="https://www.youtube.com/watch?v=QHuo2pIyTH8&list=RDQHuo2pIyTH8&start_radio=1"
target="_blank" rel="noopener">
ğŸµ PISTE 13 ğŸµ
</a>
</section>

</div>
</div>

<script>
const VALID_CODES = ["13"];
const MAX_CODE_LEN = 6;

const s1 = document.getElementById("s1");
const s2 = document.getElementById("s2");
const s3 = document.getElementById("s3");
const s4 = document.getElementById("s4");

function show(screen){
  [s1,s2,s3,s4].forEach(s=>s.classList.remove("active"));
  screen.classList.add("active");
}

function norm(str){
  return (str||"")
    .toLowerCase()
    .normalize("NFD")
    .replace(/[\u0300-\u036f]/g,"")
    .trim();
}

/* === Indices 1 === */
const more1 = document.getElementById("more1");
let hint1 = 1;
more1.onclick = () => {
  if (hint1 < 2){
    hint1++;
    document.getElementById("h1_2").style.display = "block";
    document.getElementById("counter1").innerText = `Indice ${hint1} / 2`;
  }
  if (hint1 === 2){
    more1.classList.add("disabled");
    more1.disabled = true;
  }
};

/* === Indices 2 (TRÃ”NE) === */
const more2 = document.getElementById("more2");
let hint2 = 1;
more2.onclick = () => {
  if (hint2 < 3){
    hint2++;
    document.getElementById("h2_" + hint2).style.display = "block";
    document.getElementById("counter2").innerText = `Indice ${hint2} / 3`;
  }
  if (hint2 === 3){
    more2.classList.add("disabled");
    more2.disabled = true;
  }
};

/* === Indices 3 (BOOBA) === */
const more3 = document.getElementById("more3");
let hint3 = 1;
more3.onclick = () => {
  if (hint3 < 3){
    hint3++;
    document.getElementById("h3_" + hint3).style.display = "block";
    document.getElementById("counter3").innerText = `Indice ${hint3} / 3`;
  }
  if (hint3 === 3){
    more3.classList.add("disabled");
    more3.disabled = true;
  }
};

/* === Clavier code === */
let pin = "";
const display = document.getElementById("pinDisplay");
const m1 = document.getElementById("m1");

function renderPin(){
  display.textContent = (pin + "_ _ _ _ _ _").substring(0, MAX_CODE_LEN*2).trim();
}
renderPin();

document.getElementById("keypad").addEventListener("click",(e)=>{
  const k = e.target.getAttribute("data-k");
  if (k !== null && pin.length < MAX_CODE_LEN){
    pin += k;
    renderPin();
  }
});

document.getElementById("backKey").onclick = () => { pin = pin.slice(0,-1); renderPin(); };
document.getElementById("clearKey").onclick = () => { pin = ""; renderPin(); m1.textContent=""; };

document.getElementById("b1").onclick = () => {
  if (VALID_CODES.includes(pin)){
    m1.className = "msg ok";
    m1.textContent = "âœ… Correct !";
    setTimeout(()=>show(s2), 400);
  } else {
    m1.className = "msg no";
    m1.textContent = "âŒ Mauvais codeâ€¦";
  }
};

/* === Mot 2 : TRÃ”NE === */
document.getElementById("b2").onclick = () => {
  const m2 = document.getElementById("m2");
  const a2 = document.getElementById("a2");
  if (norm(a2.value) === "trone"){
    m2.className = "msg ok";
    m2.textContent = "âœ… Correct !";
    setTimeout(()=>show(s3), 400);
  } else {
    m2.className = "msg no";
    m2.textContent = "âŒ Mauvais motâ€¦";
  }
};

/* === Mot 3 : BOOBA === */
document.getElementById("b3").onclick = () => {
  const m3 = document.getElementById("m3");
  const a3 = document.getElementById("a3");
  if (norm(a3.value) === "booba"){
    m3.className = "msg ok";
    m3.textContent = "âœ… Correct !";
    setTimeout(()=>show(s4), 400);
  } else {
    m3.className = "msg no";
    m3.textContent = "âŒ Mauvais motâ€¦";
  }
};
</script>

</body>
</html>