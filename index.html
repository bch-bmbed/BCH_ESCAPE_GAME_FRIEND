<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mini Escape Game</title>

<style>
:root{
  --bg:#0b0b10;
  --text:#f4f4f7;
  --muted:#b9b9c8;
  --accent:#7c5cff;
  --danger:#ff4d6d;
  --ok:#2ee59d;
}

body{
  margin:0;
  font-family:system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background:radial-gradient(1200px 800px at 20% 0%, #1c1650 0%, var(--bg) 55%);
  color:var(--text);
  display:flex;
  align-items:center;
  justify-content:center;
  min-height:100vh;
  padding:16px;
}

.wrap{ width:min(520px,100%); }

.card{
  background:rgba(20,20,35,.92);
  border:1px solid rgba(255,255,255,.08);
  border-radius:18px;
  padding:18px;
  box-shadow:0 18px 50px rgba(0,0,0,.45);
}

.screen{ display:none; }
.screen.active{ display:block; }

h1{ margin:0 0 10px; font-size:20px; }
p{ margin:0 0 12px; color:var(--muted); line-height:1.35; }

.hintBox{
  background:rgba(124,92,255,.10);
  border:1px dashed rgba(124,92,255,.5);
  padding:12px;
  border-radius:14px;
  font-size:14px;
}

.hintCounter{
  font-size:12px;
  color:var(--muted);
  margin-bottom:6px;
}

.hintBtn{
  margin-top:10px;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.2);
  background:rgba(0,0,0,.2);
  color:white;
  cursor:pointer;
}

.hintBtn.disabled{
  opacity:.4;
  cursor:not-allowed;
}

.msg{
  margin-top:10px;
  font-size:14px;
  min-height:20px;
}
.msg.ok{ color:var(--ok); }
.msg.no{ color:var(--danger); }

.pinDisplay{
  padding:14px;
  border-radius:14px;
  background:rgba(0,0,0,.25);
  text-align:center;
  font-size:20px;
  letter-spacing:6px;
  margin:12px 0 10px;
  user-select:none;
}

.keypad{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
}

.key{
  padding:14px;
  border-radius:14px;
  background:rgba(0,0,0,.30);
  color:white;
  cursor:pointer;
  border:1px solid rgba(255,255,255,.12);
  font-weight:800;
  font-size:16px;
}
.key:active{ transform:translateY(1px); }

.key.alt{
  font-size:14px;
  font-weight:800;
}

.primaryBtn{
  margin-top:12px;
  padding:12px;
  width:100%;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.12);
  background:linear-gradient(180deg, rgba(124,92,255,.95), rgba(124,92,255,.70));
  color:white;
  font-weight:800;
  cursor:pointer;
}

input{
  width:100%;
  padding:12px;
  border-radius:14px;
  background:rgba(0,0,0,.25);
  border:1px solid rgba(255,255,255,.12);
  color:white;
  margin-top:10px;
  outline:none;
}

.cover img{
  width:100%;
  border-radius:14px;
  display:block;
  margin-top:10px;
}

.trackLink{
  display:block;
  text-align:center;
  padding:14px;
  margin-top:16px;
  border-radius:14px;
  color:white;
  text-decoration:none;
  font-weight:900;
  border:1px solid rgba(255,255,255,.12);
}

.revealBtn{
  background:linear-gradient(180deg, #ff4d6d, #c9184a);
  font-size:18px;
  animation:pulse 1.6s infinite;
}

@keyframes pulse{
  0%{ transform:scale(1); }
  50%{ transform:scale(1.05); }
  100%{ transform:scale(1); }
}
</style>
</head>

<body>
<div class="wrap">
<div class="card">

<!-- SCREEN 1 -->
<section id="s1" class="screen active">
<h1>√ânigme 1</h1>
<p>Entre le bon code pour d√©verrouiller la suite.</p>

<div class="hintBox">
  <div class="hintCounter" id="counter1">Indice 1 / 2</div>
  <div id="h1_1">üí° Tradition proven√ßale de No√´l : les desserts chr√©tiens sont au nombre de ?</div>
  <div id="h1_2" style="display:none;">üí° Num√©ro associ√© √† la malchance.</div>
</div>

<button class="hintBtn" id="more1">Afficher un indice</button>

<div class="pinDisplay" id="pinDisplay">_ _ _ _</div>

<div class="keypad" id="keypad">
<button class="key" data-k="1">1</button>
<button class="key" data-k="2">2</button>
<button class="key" data-k="3">3</button>
<button class="key" data-k="4">4</button>
<button class="key" data-k="5">5</button>
<button class="key" data-k="6">6</button>
<button class="key" data-k="7">7</button>
<button class="key" data-k="8">8</button>
<button class="key" data-k="9">9</button>
<button class="key alt" id="backKey">‚å´</button>
<button class="key" data-k="0">0</button>
<button class="key alt" id="clearKey">Effacer</button>
</div>

<button class="primaryBtn" id="b1">Valider</button>
<div id="m1" class="msg"></div>
</section>

<!-- SCREEN 2 -->
<section id="s2" class="screen">
<h1>√ânigme 2</h1>
<p>Entre le bon mot pour acc√©der √† la r√©v√©lation.</p>

<div class="hintBox">
  <div class="hintCounter" id="counter2">Indice 1 / 3</div>
  <div id="h2_1">üí° Mot li√© √† la royaut√©.</div>
  <div id="h2_2" style="display:none;">üí° Associ√© √† une couronne et au pouvoir.</div>
  <div id="h2_3" style="display:none;">üí° Cela peut aussi √™tre le toilette.</div>
</div>

<button class="hintBtn" id="more2">Afficher un indice</button>

<input id="a2" placeholder="Votre r√©ponse">
<button class="primaryBtn" id="b2">Valider</button>
<div id="m2" class="msg"></div>
</section>

<!-- SCREEN 3 -->
<section id="s3" class="screen">
<h1>üéâ R√©v√©lation finale</h1>
<p style="font-weight:800;text-align:center;">
Pour d√©couvrir la surprise‚Ä¶<br>üëá Cliquez ci-dessous üëá
</p>

<div class="cover">
<img src="https://www.radiofrance.fr/s3/cruiser-production/2017/12/ad19e11c-8c0a-11e8-a11d-42010ae60007/860_sitesdefaultfiles20171203318378boobatrone.jpg"
loading="lazy">
</div>

<a class="trackLink revealBtn"
href="https://www.youtube.com/watch?v=QHuo2pIyTH8&list=RDQHuo2pIyTH8&start_radio=1"
target="_blank">
üéµ PISTE 13 üéµ
</a>
</section>

</div>
</div>

<script>
const VALID_CODES=["13"];
const MAX_CODE_LEN=6;

const s1=document.getElementById("s1");
const s2=document.getElementById("s2");
const s3=document.getElementById("s3");

function show(screen){
[s1,s2,s3].forEach(s=>s.classList.remove("active"));
screen.classList.add("active");
}

function norm(str){
return (str||"").toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim();
}

/* Indices 1 */
let hint1=1;
document.getElementById("more1").onclick=()=>{
if(hint1<2){
hint1++;
document.getElementById("h1_2").style.display="block";
document.getElementById("counter1").innerText=`Indice ${hint1} / 2`;
}
if(hint1===2){
more1.classList.add("disabled");
more1.disabled=true;
}
};

/* Indices 2 */
let hint2=1;
document.getElementById("more2").onclick=()=>{
if(hint2<3){
hint2++;
document.getElementById("h2_"+hint2).style.display="block";
document.getElementById("counter2").innerText=`Indice ${hint2} / 3`;
}
if(hint2===3){
more2.classList.add("disabled");
more2.disabled=true;
}
};

/* Clavier */
let pin="";
const display=document.getElementById("pinDisplay");
const m1=document.getElementById("m1");

function renderPin(){
display.textContent=(pin+"_ _ _ _ _ _").substring(0,MAX_CODE_LEN*2).trim();
}
renderPin();

document.getElementById("keypad").addEventListener("click",(e)=>{
const k=e.target.getAttribute("data-k");
if(k!==null && pin.length<MAX_CODE_LEN){
pin+=k;
renderPin();
}
});

backKey.onclick=()=>{pin=pin.slice(0,-1);renderPin();}
clearKey.onclick=()=>{pin="";renderPin();m1.textContent="";}

b1.onclick=()=>{
if(VALID_CODES.includes(pin)){
m1.className="msg ok";
m1.textContent="‚úÖ Correct !";
setTimeout(()=>show(s2),400);
}else{
m1.className="msg no";
m1.textContent="‚ùå Mauvais code‚Ä¶";
}
};

/* Mot */
b2.onclick=()=>{
if(norm(a2.value)==="trone"){
m2.className="msg ok";
m2.textContent="‚úÖ Correct !";
setTimeout(()=>show(s3),400);
}else{
m2.className="msg no";
m2.textContent="‚ùå Mauvais mot‚Ä¶";
}
};
</script>

</body>
</html>